{% extends 'base.html.twig' %}

{% block title %}Team index
{% endblock %}

{% block body %}
	 
		<section class="content-header">
			<h1>
				Equipes
				<small>Gestion</small>
			</h1>
			<ol class="breadcrumb">
				<li>
				 
				</li>
				<li class="active">
				 
				</li>
			</ol>
			<br>
		 
		</section>

		<div class="row mt">
			<div class="col-lg-12">
				<div class="content-panel">
					<table class="table table-striped table-advance table-hover">
						<div class="row">
							<div class="col-xs-8">
								<h4>
									<i class="fa fa-list-ul"></i>
									liste 
								</h4>
						 
						<hr>


						<table class="table">
							<thead>
								<tr>
									<th>Id</th>
									<th>Name</th>
									<th>Affecte</th>
									<th>Panier</th>
									<th>User</th>
									<th>reafect</th>
									<th>reafct detll</th>
									<th>Parrainage </th>
									<th>Prg teall </th>
									<th>Appel </th>
									<th>Apl det </th>
									<th>Avenant </th>
									<th>Avnt dtl </th>
									<th>Ancienne</th>   
									<th>Anc dtl</th>    
									<th>site </th>
									<th>st dtl</th>
									<th>Revendeur </th>
									<th>Revd dtl </th>
								</tr>
							</thead>
							<tbody>
								{% for teams in team %}
									<tr>
										<td>{{ teams.id }}</td>
										<td>{{ teams.name }}</td>
										
										

										 <td>  {{ teams.prospects|length }}   </td>

										 <td>  {{ teams.prospects|filter(p => p.comrcl is null  )| length  }}    </td>
										 <td> 
											{% for user in teams.users %}
												{{  user  }} <br>
											{% endfor %}
										</td>
										<td>
										 
										  {{ teams.prospects|filter(p => p.comrcl is not null  )| length  }}
										</td>
										<td>
										 
										  {% for user in teams.users %}
											{{  user.prospections | length   }} <br>
										   {% endfor %}
										</td>
										<td>
										 
										  {{ teams.prospects|filter(p => p.motifSaise == 1  and p.comrcl is not null )| length  }}
										</td>
										<td> 
										 	 
										    {% for user in teams.users %}
										    	{{ user.prospections|filter(p => p.motifSaise == 1 )| length }} <br>
										  	{% endfor %}
										 
										</td>

										<td>

										  {{ teams.prospects|filter(p => p.motifSaise ==  2  and p.comrcl is not null)| length  }}
										</td>

										<td> 
										 	 
										    {% for user in teams.users %}
										    	{{ user.prospections|filter(p => p.motifSaise == 2  and p.comrcl is not null )| length }} <br>
										  	{% endfor %}
										 
										 </td>
										 <td>
										 
										  {{ teams.prospects|filter(p => p.motifSaise == 3   and p.comrcl is not null )| length  }}
										</td>
										<td> 
										 	 
										    {% for user in teams.users %}
										    	{{ user.prospections|filter(p => p.motifSaise == 3  and p.comrcl is not null )| length }} <br>
										  	{% endfor %}
										 
										 </td>
										 <td>
										 
										  {{ teams.prospects|filter(p => p.motifSaise == 4   and p.comrcl is not null )| length  }}
										</td>
										<td> 
										 	 
										    {% for user in teams.users %}
										    	{{ user.prospections|filter(p => p.motifSaise == 4  and p.comrcl is not null )| length }} <br>
										  	{% endfor %}
										 
										 </td>
										 <td>
										 
										  {{ teams.prospects|filter(p => p.motifSaise is null and p.source == 'Propre site' and p.comrcl is not null)| length  }}
										</td>
										<td> 
										 	 
										    {% for user in teams.users %}
										    	{{ user.prospections|filter(p => p.motifSaise is null and p.source == 'Propre site' and p.comrcl is not null)| length }} <br>
										  	{% endfor %}
										 
										 </td>
										  <td>
										 
										  {{ teams.prospects|filter(p => p.motifSaise is null and p.source == 'Revendeur' and p.comrcl is not null)| length  }}
										</td>
										<td> 
										 	 
										    {% for user in teams.users %}
										    	{{ user.prospections|filter(p => p.motifSaise is null and p.source == 'Revendeur' and p.comrcl is not null )| length }} <br>
										  	{% endfor %}
										 
										 </td>
										  <td class="btn-toolbar">
											 
											<a href="{{ path('app_team_edit', {'id': teams.id}) }}" class="btn btn-primary btn-xs"> <i class="fa fa-pencil"></i></a>
											<a href="{{ path('dashboard_show', {'id': teams.id}) }}" class="btn btn-success btn-xs"> <i class="fa fa-eye"></i> </a>				
														
										  </td>

										   
									</tr>
								 
							 {% endfor %}
								
							</tbody>

							 <thead>
								<tr>
									<th>total</th>
									<th>Id	d</th>
									<th> dc </th>
									<th>Id	d</th>
									<th>Id	d</th>
								</tr>
							</thead>
							
							<tfoot>
							 
						</tfoot>
						</table>
					</div>
				</div>
			</div>
		</div>
	{% endblock %}
